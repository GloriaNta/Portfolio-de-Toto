<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Décryptez le chiffre de César</title>
    <style>
        body{font-family:Arial,Helvetica,sans-serif}b{color:#57f}blockquote{font-family:Courier New,Courier,monospace;font-size:18px}hr{margin:20px 0}h3{color:#49808E}
    </style>
</head>
<body>
    <h2>Décryptez le chiffre de César</h2>
    <p>De rapides recherches vous ont mené vers ce chiffrement simple, utilisé par les romains et Jules César lors de leurs campagnes militaires :<br>      
        <p><a href="https://fr.wikipedia.org/wiki/Chiffrement_par_d%C3%A9calage" target="_blank">Le chiffre de César</a></p>
        Le principe est de décaler d'un certain nombre les lettres pour qu'il ne soit plus lisible.<br><b>Le décalage le plus courant est de 13 lettres (ROT13)</b>, et c'est celui que nous testerons en priorité.<br>
        
        <hr>
        Avec les explications de Wikipédia et l'utilisation des codes ASCII, <b>déchiffrez le message et affichez le résultat à l'écran.</b>
             </p>
    <script>

        const message_crypted = "YR PYHO QH PUVSSER FR ERHAVEN YHAQV CEBPUNVA CBHE YR CERZVRE PUNYYRATR QR YN FNVFBA NH ONE ONOONTR N ONFGVYYR";
        
        /*  le principe est simple: on va passer en revue les lettres du message chiffré
            et pour chaque lettre, on va prendre son code ASCII et lui soustraire 13 pour créer le décalage vers la gauche.
            Si cette soustraction fait sortir la lettre de l'alphabet, on ajoute 26 pour revenir à la fin de l'alphabet.
        */


        // on initialise les variables et contantes utilent pour notre algorithme

        let result = '',
            ascii = 0;
        const nb_letter = message_crypted.length;

        // on passe en revue chaque lettre du message chiffré

        for(let j = 0; j<nb_letter; j++){

            // on récupére le code ascii de la lettre
            ascii = message_crypted.charCodeAt(j);

            // on intervient que si ce n'est pas un espace (code ASCII de 32)
            if(ascii != 32){

                // on fait le décalage vers la gauche
                ascii -= 13;

                // si on sort de l'alphabet, on revient à la fin.
                if(ascii<65){                      
                    ascii += 26;
                }
            }

            // on concatène la lettre déchiffré au message
            result += String.fromCharCode(ascii);
        }
        
        document.write("<h3>Message déchiffré : "+result+"</h3>");
    </script>
</body>
</html>